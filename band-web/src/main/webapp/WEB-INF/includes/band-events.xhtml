<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui">
    <h:form>
        <h:panelGrid columnClasses="value">
            <h3 style="margin-top: 0">#{msg['band.event.header']}</h3>
            <p:schedule id="schedule" value="#{scheduleBean.eventModel}" editable="true" widgetVar="gigs" timeZone="GMT+2">
                <f:param name="id" value="#{bandBean.bandVo.id}"/>
                <p:ajax event="dateSelect"
                        listener="#{scheduleViewMB.onDateSelect}"
                        update="@widgetVar(eventDialog)"
                        oncomplete="PF('eventDialog').show();" />
                <p:ajax event="eventSelect"
                        listener="#{scheduleViewMB.onEventSelect}"
                        update="@widgetVar(eventDialog)"
                        oncomplete="PF('eventDialog').show();" />
            </p:schedule>
        </h:panelGrid>

        <p:dialog widgetVar="eventDialog" header="#{msg['band.event.eventDetails']}" showEffect="clip" hideEffect="clip"
                  rendered="#{userOnPageBean.admin or userOnPageBean.bandOwner}">
            <h:panelGrid id="eventDetails" columns="2">
                <p:outputLabel for="event-title" value="#{msg['band.event.title']}" />
                <p:inputText id="event-title" value="#{scheduleViewMB.event.title}" required="true" requiredMessage="#{msg['band.event.title.missing']}" />

                <p:outputLabel for="event-from" value="#{msg['band.event.from']}" />
                <p:calendar id="event-from" value="#{scheduleViewMB.event.startDate}" timeZone="GMT+2" pattern="dd/MM/yyyy HH:mm"/>

                <p:outputLabel for="event-to" value="#{msg['band.event.to']}" />
                <p:calendar id="event-to" value="#{scheduleViewMB.event.endDate}" timeZone="GMT+2" pattern="dd/MM/yyyy HH:mm"/>

                <p:outputLabel for="event-description" value="#{msg['band.event.description']}" />
                <p:inputText id="event-description" value="#{scheduleViewMB.event.description}" required="true" requiredMessage="#{msg['band.event.description.missing']}"/>

                <p:commandButton type="reset"
                                 value="#{msg['band.event.reset']}" />
                <p:commandButton id="event-add"
                                 value="#{msg['band.event.save']}"
                                 actionListener="#{scheduleViewMB.addEvent}"
                                 oncomplete="PF('gigs').update(); PF('eventDialog').hide();"/>
                <p:commandButton id="event-delete"
                                 value="#{msg['band.event.delete']}"
                                 actionListener="#{scheduleViewMB.deleteEvent}"
                                 oncomplete="PF('gigs').update(); PF('eventDialog').hide();"/>
            </h:panelGrid>
        </p:dialog>
    </h:form>
</ui:composition>
