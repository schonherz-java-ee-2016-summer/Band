<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets">
    <p:panel>
        <button class="btn btn-primary"
                type="button"
                onclick="PF('edit-band-dialog').show();">
            #{msg['band.edit.button']}
        </button>

        <h:panelGrid id="band-panel" columns="2" cellpadding="5" columnClasses="label, value">
            <h:outputText styleClass="output-band-text" value="#{msg['band.name']}:"/>
            <h:outputText styleClass="output-band-text" value="#{bandBean.bandVo.name}"/>
            <h:outputText styleClass="output-band-text" value="#{msg['band.genre']}:"/>
            <h:outputText styleClass="output-band-text" value="#{bandBean.bandVo.genre}"/>
            <h:outputText styleClass="output-band-text" value="#{msg['band.description']}:"/>
            <h:outputText styleClass="output-band-text" value="#{bandBean.bandVo.description}"/>
        </h:panelGrid>

        <h:form id="band-mate-table">
            <p:carousel id="band-mates" var="bandMate"
                        value="#{publicBandProfileBean.bandMatesMB.bandMateVos}"
                        itemStyle="text-align:center"
                        responsive="true"
                        headerText="#{msg['band.mate']}">
                <p:panelGrid id="band-mate-panelgrid" columns="1" style="width:100%;margin:10px 0px" layout="grid" styleClass="ui-panelgrid-blank">
                    <f:facet name="header">
                        #{bandMate.firstName} #{bandMate.lastName}
                    </f:facet>

                    <h:outputText styleClass="carousel-output-text" value="#{bandMate.email}" />

                    <h:outputText styleClass="carousel-output-text" value="#{bandMate.instrument}" />

                    <p:commandButton update=":band-mate-edit-dialog-form:edit-band-panel"
                                     oncomplete="PF('band-mate-edit-dialog').show();" icon="ui-icon-pencil">
                        <f:setPropertyActionListener value="#{bandMate}" target="#{bandMateBean.bandMateVo}" />
                    </p:commandButton>

                    <p:commandButton value="#{msg['band.mate.delete.button']}"
                                     actionListener="#{publicBandProfileBean.deleteBandMates(bandMate)}"
                                     oncomplete="PF('band-mate-edit-dialog').hide()">
                        <p:confirm header="Megerősítés" message="Biztosan törli?" icon="ui-icon-alert" />
                    </p:commandButton>

                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                        <p:commandButton value="Yes" type="button" update=":band-mate-table:band-mates" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                    </p:confirmDialog>

                </p:panelGrid>

                <f:facet name="footer">
                    In total there are #{bandMatesBean.bandMateVos.size()} band mates.
                </f:facet>
            </p:carousel>

        </h:form>
    </p:panel>

    <p:dialog header="#{msg['band.mate.edit']}" widgetVar="band-mate-edit-dialog" modal="true">
        <h:form id="band-mate-edit-dialog-form">
            <h:panelGrid id="edit-band-panel" columns="2" cellpadding="5" columnClasses="label, value">
                <h:outputText for="firstName"  styleClass="output-text" value="#{msg['band.mate.first.name']}:"/>
                <p:inputText id="firstName" value="#{bandMateBean.bandMateVo.firstName}"
                             styleClass="input-text"/>

                <h:outputText for="lastName" styleClass="output-text" value="#{msg['band.mate.last.name']}:"/>
                <p:inputText id="lastName" value="#{bandMateBean.bandMateVo.lastName}"
                             styleClass="input-text"/>

                <h:outputText for="email" styleClass="output-text" value="#{msg['band.mate.email.address']}:"/>
                <p:inputText id="email" value="#{bandMateBean.bandMateVo.email}"
                             styleClass="input-text"/>

                <h:outputText for="instrument" styleClass="output-text" value="#{msg['band.mate.musical.instrument']}:"/>
                <p:inputText id="instrument" value="#{bandMateBean.bandMateVo.instrument}"
                             styleClass="input-text"/>
                <!--<h:inputHidden value="#{bandBean.bandVo.id}" />-->
                <p:commandButton type="submit"
                                 value="#{msg['band.edit.save.button']}"
                                 update="band-mate-table"
                                 icon="ui-icon-check"
                                 oncomplete="PF('band-mate-edit-dialog').hide()"
                                 actionListener="#{publicBandProfileBean.editBandMates}"/>
            </h:panelGrid>
        </h:form>
    </p:dialog>


    <ui:include src="dialogs/band-edit-dialog.xhtml"/>

</ui:composition>
